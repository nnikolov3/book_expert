The SATA controller operates in several modes, including IDE, AHCI, and RAID, each selected by programming the SMS field, D thirty one F two Colon Reg ninety h brackets seven Colon six, to specific values. In IDE mode, set by programming the SMS field to zero zero, the SATA controller uses the A T A slash I D E programming interface, controlling six or four S A T A ports through two S A T A functions. One function routes up to four S A T A ports, D thirty one F two, while the other, specific to desktop S K U s, handles two S A T A ports, D thirty one F five. The Sub Class Code, accessed via D thirty one F two Colon Reg zero A h and D thirty one F five Colon Reg zero A h, is set to zero one h in IDE mode, which does not require special O S driver support and is also known as compatibility mode.In contrast, AHCI mode is selected by programming the SMS field to zero one b, configuring the SATA controller to use the A H C I programming interface. Here, six S A T A ports are controlled by a single S A T A function, D thirty one F two, with the Sub Class Code at D thirty one F two Colon Reg zero A h set to zero six h. AHCI mode necessitates specific O S driver support. RAID mode, activated by programming the SMS field to one zero b, also utilizes the A H C I programming interface, managing six or four S A T A ports through a single S A T A function, D thirty one F two. The Sub Class Code for RAID mode, at D thirty one F two Colon Reg zero A h, is set to zero four h, and this mode requires specific O S driver support as well. For the RAID option R O M to access all S A T A ports, it must enable and use the A H C I programming interface by setting the A E bit, A B A R zero four h brackets thirty one, which implies that all register settings applicable to A H C I mode must be set in R A I D mode, and the B I O S must provide A H C I support.The P C H supports stable image-compatible I D, reporting a Device I D of two eight two two h for a desktop S K U when the alternative I D enable is not set. To reduce drive detection time and total boot time, the system B I O S should enable the SATA port early during P O S T by setting the Port x Enable bits in the Port Control and Status register, D thirty one F two Reg nine two h and D thirty one F five Reg nine two h. The system's memory map is crucial for the O S to understand available memory regions. The firmware provides this map, typically through the real-mode interrupt service fifteen h, function E eight h, sub-function twenty h, which the firmware must implement. Several types of memory regions are defined, including Memory, Reserved, A C P I Reclaim, A C P I N V S, R O M, I O A P I C, and L A P I C, each with specific characteristics and uses within the system. For instance, Memory one is general D Ram available for O S consumption, while Reserved two denotes D Ram addresses not for O S use. A C P I Reclaim three and A C P I N V S four pertain to memory containing A C P I tables, with the distinction being the firmware's need for runtime access. R O M five refers to nonvolatile storage, such as flash, and I O A P I C six and L A P I C seven are related to memory decoded by I O A P I Cs and local A P I Cs, respectively, which must be uncached.Region locations are also specified, with certain addresses reserved for specific purposes, such as zero zero zero zero zero zero zero zero to zero zero zero nine F F F F being reserved for Memory, and zero zero zero A zero zero zero zero to zero zero zero F F F F being reserved for legacy option R O Ms and legacy uses. Understanding these memory regions and their locations is essential for managing system resources and ensuring compatibility between hardware and software components. The correct management of these regions, facilitated by the firmware's provision of the memory map to the O S, is critical for the efficient operation of the system, allowing the O S to allocate resources appropriately and avoid conflicts between different system components.
